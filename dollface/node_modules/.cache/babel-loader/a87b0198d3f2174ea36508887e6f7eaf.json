{"ast":null,"code":"// Generated by CoffeeScript 1.9.3\n(function () {\n  var Instafeed;\n\n  Instafeed = function () {\n    function Instafeed(params, context) {\n      var option, value;\n      this.options = {\n        target: 'instafeed',\n        get: 'popular',\n        resolution: 'thumbnail',\n        sortBy: 'none',\n        links: true,\n        mock: false,\n        useHttp: false\n      };\n\n      if (typeof params === 'object') {\n        for (option in params) {\n          value = params[option];\n          this.options[option] = value;\n        }\n      }\n\n      this.context = context != null ? context : this;\n      this.unique = this._genKey();\n    }\n\n    Instafeed.prototype.hasNext = function () {\n      return typeof this.context.nextUrl === 'string' && this.context.nextUrl.length > 0;\n    };\n\n    Instafeed.prototype.next = function () {\n      if (!this.hasNext()) {\n        return false;\n      }\n\n      return this.run(this.context.nextUrl);\n    };\n\n    Instafeed.prototype.run = function (url) {\n      var header, instanceName, script;\n\n      if (typeof this.options.clientId !== 'string') {\n        if (typeof this.options.accessToken !== 'string') {\n          throw new Error(\"Missing clientId or accessToken.\");\n        }\n      }\n\n      if (typeof this.options.accessToken !== 'string') {\n        if (typeof this.options.clientId !== 'string') {\n          throw new Error(\"Missing clientId or accessToken.\");\n        }\n      }\n\n      if (this.options.before != null && typeof this.options.before === 'function') {\n        this.options.before.call(this);\n      }\n\n      if (typeof document !== \"undefined\" && document !== null) {\n        script = document.createElement('script');\n        script.id = 'instafeed-fetcher';\n        script.src = url || this._buildUrl();\n        header = document.getElementsByTagName('head');\n        header[0].appendChild(script);\n        instanceName = \"instafeedCache\" + this.unique;\n        window[instanceName] = new Instafeed(this.options, this);\n        window[instanceName].unique = this.unique;\n      }\n\n      return true;\n    };\n\n    Instafeed.prototype.parse = function (response) {\n      var anchor, childNodeCount, childNodeIndex, childNodesArr, e, eMsg, fragment, header, htmlString, httpProtocol, i, image, imageObj, imageString, imageUrl, images, img, imgHeight, imgOrient, imgUrl, imgWidth, instanceName, j, k, len, len1, len2, node, parsedLimit, reverse, sortSettings, targetEl, tmpEl;\n\n      if (typeof response !== 'object') {\n        if (this.options.error != null && typeof this.options.error === 'function') {\n          this.options.error.call(this, 'Invalid JSON data');\n          return false;\n        } else {\n          throw new Error('Invalid JSON response');\n        }\n      }\n\n      if (response.meta.code !== 200) {\n        if (this.options.error != null && typeof this.options.error === 'function') {\n          this.options.error.call(this, response.meta.error_message);\n          return false;\n        } else {\n          throw new Error(\"Error from Instagram: \" + response.meta.error_message);\n        }\n      }\n\n      if (response.data.length === 0) {\n        if (this.options.error != null && typeof this.options.error === 'function') {\n          this.options.error.call(this, 'No images were returned from Instagram');\n          return false;\n        } else {\n          throw new Error('No images were returned from Instagram');\n        }\n      }\n\n      if (this.options.success != null && typeof this.options.success === 'function') {\n        this.options.success.call(this, response);\n      }\n\n      this.context.nextUrl = '';\n\n      if (response.pagination != null) {\n        this.context.nextUrl = response.pagination.next_url;\n      }\n\n      if (this.options.sortBy !== 'none') {\n        if (this.options.sortBy === 'random') {\n          sortSettings = ['', 'random'];\n        } else {\n          sortSettings = this.options.sortBy.split('-');\n        }\n\n        reverse = sortSettings[0] === 'least' ? true : false;\n\n        switch (sortSettings[1]) {\n          case 'random':\n            response.data.sort(function () {\n              return 0.5 - Math.random();\n            });\n            break;\n\n          case 'recent':\n            response.data = this._sortBy(response.data, 'created_time', reverse);\n            break;\n\n          case 'liked':\n            response.data = this._sortBy(response.data, 'likes.count', reverse);\n            break;\n\n          case 'commented':\n            response.data = this._sortBy(response.data, 'comments.count', reverse);\n            break;\n\n          default:\n            throw new Error(\"Invalid option for sortBy: '\" + this.options.sortBy + \"'.\");\n        }\n      }\n\n      if (typeof document !== \"undefined\" && document !== null && this.options.mock === false) {\n        images = response.data;\n        parsedLimit = parseInt(this.options.limit, 10);\n\n        if (this.options.limit != null && images.length > parsedLimit) {\n          images = images.slice(0, parsedLimit);\n        }\n\n        fragment = document.createDocumentFragment();\n\n        if (this.options.filter != null && typeof this.options.filter === 'function') {\n          images = this._filter(images, this.options.filter);\n        }\n\n        if (this.options.template != null && typeof this.options.template === 'string') {\n          htmlString = '';\n          imageString = '';\n          imgUrl = '';\n          tmpEl = document.createElement('div');\n\n          for (i = 0, len = images.length; i < len; i++) {\n            image = images[i];\n            imageObj = image.images[this.options.resolution];\n\n            if (typeof imageObj !== 'object') {\n              eMsg = \"No image found for resolution: \" + this.options.resolution + \".\";\n              throw new Error(eMsg);\n            }\n\n            imgWidth = imageObj.width;\n            imgHeight = imageObj.height;\n            imgOrient = \"square\";\n\n            if (imgWidth > imgHeight) {\n              imgOrient = \"landscape\";\n            }\n\n            if (imgWidth < imgHeight) {\n              imgOrient = \"portrait\";\n            }\n\n            imageUrl = imageObj.url;\n            httpProtocol = window.location.protocol.indexOf(\"http\") >= 0;\n\n            if (httpProtocol && !this.options.useHttp) {\n              imageUrl = imageUrl.replace(/https?:\\/\\//, '//');\n            }\n\n            imageString = this._makeTemplate(this.options.template, {\n              model: image,\n              id: image.id,\n              link: image.link,\n              type: image.type,\n              image: imageUrl,\n              width: imgWidth,\n              height: imgHeight,\n              orientation: imgOrient,\n              caption: this._getObjectProperty(image, 'caption.text'),\n              likes: image.likes.count,\n              comments: image.comments.count,\n              location: this._getObjectProperty(image, 'location.name')\n            });\n            htmlString += imageString;\n          }\n\n          tmpEl.innerHTML = htmlString;\n          childNodesArr = [];\n          childNodeIndex = 0;\n          childNodeCount = tmpEl.childNodes.length;\n\n          while (childNodeIndex < childNodeCount) {\n            childNodesArr.push(tmpEl.childNodes[childNodeIndex]);\n            childNodeIndex += 1;\n          }\n\n          for (j = 0, len1 = childNodesArr.length; j < len1; j++) {\n            node = childNodesArr[j];\n            fragment.appendChild(node);\n          }\n        } else {\n          for (k = 0, len2 = images.length; k < len2; k++) {\n            image = images[k];\n            img = document.createElement('img');\n            imageObj = image.images[this.options.resolution];\n\n            if (typeof imageObj !== 'object') {\n              eMsg = \"No image found for resolution: \" + this.options.resolution + \".\";\n              throw new Error(eMsg);\n            }\n\n            imageUrl = imageObj.url;\n            httpProtocol = window.location.protocol.indexOf(\"http\") >= 0;\n\n            if (httpProtocol && !this.options.useHttp) {\n              imageUrl = imageUrl.replace(/https?:\\/\\//, '//');\n            }\n\n            img.src = imageUrl;\n\n            if (this.options.links === true) {\n              anchor = document.createElement('a');\n              anchor.href = image.link;\n              anchor.appendChild(img);\n              fragment.appendChild(anchor);\n            } else {\n              fragment.appendChild(img);\n            }\n          }\n        }\n\n        targetEl = this.options.target;\n\n        if (typeof targetEl === 'string') {\n          targetEl = document.getElementById(targetEl);\n        }\n\n        if (targetEl == null) {\n          eMsg = \"No element with id=\\\"\" + this.options.target + \"\\\" on page.\";\n          throw new Error(eMsg);\n        }\n\n        targetEl.appendChild(fragment);\n        header = document.getElementsByTagName('head')[0];\n        header.removeChild(document.getElementById('instafeed-fetcher'));\n        instanceName = \"instafeedCache\" + this.unique;\n        window[instanceName] = void 0;\n\n        try {\n          delete window[instanceName];\n        } catch (_error) {\n          e = _error;\n        }\n      }\n\n      if (this.options.after != null && typeof this.options.after === 'function') {\n        this.options.after.call(this);\n      }\n\n      return true;\n    };\n\n    Instafeed.prototype._buildUrl = function () {\n      var base, endpoint, final;\n      base = \"https://api.instagram.com/v1\";\n\n      switch (this.options.get) {\n        case \"popular\":\n          endpoint = \"media/popular\";\n          break;\n\n        case \"tagged\":\n          if (!this.options.tagName) {\n            throw new Error(\"No tag name specified. Use the 'tagName' option.\");\n          }\n\n          endpoint = \"tags/\" + this.options.tagName + \"/media/recent\";\n          break;\n\n        case \"location\":\n          if (!this.options.locationId) {\n            throw new Error(\"No location specified. Use the 'locationId' option.\");\n          }\n\n          endpoint = \"locations/\" + this.options.locationId + \"/media/recent\";\n          break;\n\n        case \"user\":\n          if (!this.options.userId) {\n            throw new Error(\"No user specified. Use the 'userId' option.\");\n          }\n\n          endpoint = \"users/\" + this.options.userId + \"/media/recent\";\n          break;\n\n        default:\n          throw new Error(\"Invalid option for get: '\" + this.options.get + \"'.\");\n      }\n\n      final = base + \"/\" + endpoint;\n\n      if (this.options.accessToken != null) {\n        final += \"?access_token=\" + this.options.accessToken;\n      } else {\n        final += \"?client_id=\" + this.options.clientId;\n      }\n\n      if (this.options.limit != null) {\n        final += \"&count=\" + this.options.limit;\n      }\n\n      final += \"&callback=instafeedCache\" + this.unique + \".parse\";\n      return final;\n    };\n\n    Instafeed.prototype._genKey = function () {\n      var S4;\n\n      S4 = function () {\n        return ((1 + Math.random()) * 0x10000 | 0).toString(16).substring(1);\n      };\n\n      return \"\" + S4() + S4() + S4() + S4();\n    };\n\n    Instafeed.prototype._makeTemplate = function (template, data) {\n      var output, pattern, ref, varName, varValue;\n      pattern = /(?:\\{{2})([\\w\\[\\]\\.]+)(?:\\}{2})/;\n      output = template;\n\n      while (pattern.test(output)) {\n        varName = output.match(pattern)[1];\n        varValue = (ref = this._getObjectProperty(data, varName)) != null ? ref : '';\n        output = output.replace(pattern, function () {\n          return \"\" + varValue;\n        });\n      }\n\n      return output;\n    };\n\n    Instafeed.prototype._getObjectProperty = function (object, property) {\n      var piece, pieces;\n      property = property.replace(/\\[(\\w+)\\]/g, '.$1');\n      pieces = property.split('.');\n\n      while (pieces.length) {\n        piece = pieces.shift();\n\n        if (object != null && piece in object) {\n          object = object[piece];\n        } else {\n          return null;\n        }\n      }\n\n      return object;\n    };\n\n    Instafeed.prototype._sortBy = function (data, property, reverse) {\n      var sorter;\n\n      sorter = function (a, b) {\n        var valueA, valueB;\n        valueA = this._getObjectProperty(a, property);\n        valueB = this._getObjectProperty(b, property);\n\n        if (reverse) {\n          if (valueA > valueB) {\n            return 1;\n          } else {\n            return -1;\n          }\n        }\n\n        if (valueA < valueB) {\n          return 1;\n        } else {\n          return -1;\n        }\n      };\n\n      data.sort(sorter.bind(this));\n      return data;\n    };\n\n    Instafeed.prototype._filter = function (images, filter) {\n      var filteredImages, fn, i, image, len;\n      filteredImages = [];\n\n      fn = function (image) {\n        if (filter(image)) {\n          return filteredImages.push(image);\n        }\n      };\n\n      for (i = 0, len = images.length; i < len; i++) {\n        image = images[i];\n        fn(image);\n      }\n\n      return filteredImages;\n    };\n\n    return Instafeed;\n  }();\n\n  (function (root, factory) {\n    if (typeof define === 'function' && define.amd) {\n      return define([], factory);\n    } else if (typeof module === 'object' && module.exports) {\n      return module.exports = factory();\n    } else {\n      return root.Instafeed = factory();\n    }\n  })(this, function () {\n    return Instafeed;\n  });\n}).call(this);","map":{"version":3,"sources":["C:/Users/Joshua Han/Documents/GitHub/DollfacePMU/dollface/node_modules/instafeed.js/instafeed.js"],"names":["Instafeed","params","context","option","value","options","target","get","resolution","sortBy","links","mock","useHttp","unique","_genKey","prototype","hasNext","nextUrl","length","next","run","url","header","instanceName","script","clientId","accessToken","Error","before","call","document","createElement","id","src","_buildUrl","getElementsByTagName","appendChild","window","parse","response","anchor","childNodeCount","childNodeIndex","childNodesArr","e","eMsg","fragment","htmlString","httpProtocol","i","image","imageObj","imageString","imageUrl","images","img","imgHeight","imgOrient","imgUrl","imgWidth","j","k","len","len1","len2","node","parsedLimit","reverse","sortSettings","targetEl","tmpEl","error","meta","code","error_message","data","success","pagination","next_url","split","sort","Math","random","_sortBy","parseInt","limit","slice","createDocumentFragment","filter","_filter","template","width","height","location","protocol","indexOf","replace","_makeTemplate","model","link","type","orientation","caption","_getObjectProperty","likes","count","comments","innerHTML","childNodes","push","href","getElementById","removeChild","_error","after","base","endpoint","final","tagName","locationId","userId","S4","toString","substring","output","pattern","ref","varName","varValue","test","match","object","property","piece","pieces","shift","sorter","a","b","valueA","valueB","bind","filteredImages","fn","root","factory","define","amd","module","exports"],"mappings":"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","sourcesContent":["// Generated by CoffeeScript 1.9.3\n(function() {\n  var Instafeed;\n\n  Instafeed = (function() {\n    function Instafeed(params, context) {\n      var option, value;\n      this.options = {\n        target: 'instafeed',\n        get: 'popular',\n        resolution: 'thumbnail',\n        sortBy: 'none',\n        links: true,\n        mock: false,\n        useHttp: false\n      };\n      if (typeof params === 'object') {\n        for (option in params) {\n          value = params[option];\n          this.options[option] = value;\n        }\n      }\n      this.context = context != null ? context : this;\n      this.unique = this._genKey();\n    }\n\n    Instafeed.prototype.hasNext = function() {\n      return typeof this.context.nextUrl === 'string' && this.context.nextUrl.length > 0;\n    };\n\n    Instafeed.prototype.next = function() {\n      if (!this.hasNext()) {\n        return false;\n      }\n      return this.run(this.context.nextUrl);\n    };\n\n    Instafeed.prototype.run = function(url) {\n      var header, instanceName, script;\n      if (typeof this.options.clientId !== 'string') {\n        if (typeof this.options.accessToken !== 'string') {\n          throw new Error(\"Missing clientId or accessToken.\");\n        }\n      }\n      if (typeof this.options.accessToken !== 'string') {\n        if (typeof this.options.clientId !== 'string') {\n          throw new Error(\"Missing clientId or accessToken.\");\n        }\n      }\n      if ((this.options.before != null) && typeof this.options.before === 'function') {\n        this.options.before.call(this);\n      }\n      if (typeof document !== \"undefined\" && document !== null) {\n        script = document.createElement('script');\n        script.id = 'instafeed-fetcher';\n        script.src = url || this._buildUrl();\n        header = document.getElementsByTagName('head');\n        header[0].appendChild(script);\n        instanceName = \"instafeedCache\" + this.unique;\n        window[instanceName] = new Instafeed(this.options, this);\n        window[instanceName].unique = this.unique;\n      }\n      return true;\n    };\n\n    Instafeed.prototype.parse = function(response) {\n      var anchor, childNodeCount, childNodeIndex, childNodesArr, e, eMsg, fragment, header, htmlString, httpProtocol, i, image, imageObj, imageString, imageUrl, images, img, imgHeight, imgOrient, imgUrl, imgWidth, instanceName, j, k, len, len1, len2, node, parsedLimit, reverse, sortSettings, targetEl, tmpEl;\n      if (typeof response !== 'object') {\n        if ((this.options.error != null) && typeof this.options.error === 'function') {\n          this.options.error.call(this, 'Invalid JSON data');\n          return false;\n        } else {\n          throw new Error('Invalid JSON response');\n        }\n      }\n      if (response.meta.code !== 200) {\n        if ((this.options.error != null) && typeof this.options.error === 'function') {\n          this.options.error.call(this, response.meta.error_message);\n          return false;\n        } else {\n          throw new Error(\"Error from Instagram: \" + response.meta.error_message);\n        }\n      }\n      if (response.data.length === 0) {\n        if ((this.options.error != null) && typeof this.options.error === 'function') {\n          this.options.error.call(this, 'No images were returned from Instagram');\n          return false;\n        } else {\n          throw new Error('No images were returned from Instagram');\n        }\n      }\n      if ((this.options.success != null) && typeof this.options.success === 'function') {\n        this.options.success.call(this, response);\n      }\n      this.context.nextUrl = '';\n      if (response.pagination != null) {\n        this.context.nextUrl = response.pagination.next_url;\n      }\n      if (this.options.sortBy !== 'none') {\n        if (this.options.sortBy === 'random') {\n          sortSettings = ['', 'random'];\n        } else {\n          sortSettings = this.options.sortBy.split('-');\n        }\n        reverse = sortSettings[0] === 'least' ? true : false;\n        switch (sortSettings[1]) {\n          case 'random':\n            response.data.sort(function() {\n              return 0.5 - Math.random();\n            });\n            break;\n          case 'recent':\n            response.data = this._sortBy(response.data, 'created_time', reverse);\n            break;\n          case 'liked':\n            response.data = this._sortBy(response.data, 'likes.count', reverse);\n            break;\n          case 'commented':\n            response.data = this._sortBy(response.data, 'comments.count', reverse);\n            break;\n          default:\n            throw new Error(\"Invalid option for sortBy: '\" + this.options.sortBy + \"'.\");\n        }\n      }\n      if ((typeof document !== \"undefined\" && document !== null) && this.options.mock === false) {\n        images = response.data;\n        parsedLimit = parseInt(this.options.limit, 10);\n        if ((this.options.limit != null) && images.length > parsedLimit) {\n          images = images.slice(0, parsedLimit);\n        }\n        fragment = document.createDocumentFragment();\n        if ((this.options.filter != null) && typeof this.options.filter === 'function') {\n          images = this._filter(images, this.options.filter);\n        }\n        if ((this.options.template != null) && typeof this.options.template === 'string') {\n          htmlString = '';\n          imageString = '';\n          imgUrl = '';\n          tmpEl = document.createElement('div');\n          for (i = 0, len = images.length; i < len; i++) {\n            image = images[i];\n            imageObj = image.images[this.options.resolution];\n            if (typeof imageObj !== 'object') {\n              eMsg = \"No image found for resolution: \" + this.options.resolution + \".\";\n              throw new Error(eMsg);\n            }\n            imgWidth = imageObj.width;\n            imgHeight = imageObj.height;\n            imgOrient = \"square\";\n            if (imgWidth > imgHeight) {\n              imgOrient = \"landscape\";\n            }\n            if (imgWidth < imgHeight) {\n              imgOrient = \"portrait\";\n            }\n            imageUrl = imageObj.url;\n            httpProtocol = window.location.protocol.indexOf(\"http\") >= 0;\n            if (httpProtocol && !this.options.useHttp) {\n              imageUrl = imageUrl.replace(/https?:\\/\\//, '//');\n            }\n            imageString = this._makeTemplate(this.options.template, {\n              model: image,\n              id: image.id,\n              link: image.link,\n              type: image.type,\n              image: imageUrl,\n              width: imgWidth,\n              height: imgHeight,\n              orientation: imgOrient,\n              caption: this._getObjectProperty(image, 'caption.text'),\n              likes: image.likes.count,\n              comments: image.comments.count,\n              location: this._getObjectProperty(image, 'location.name')\n            });\n            htmlString += imageString;\n          }\n          tmpEl.innerHTML = htmlString;\n          childNodesArr = [];\n          childNodeIndex = 0;\n          childNodeCount = tmpEl.childNodes.length;\n          while (childNodeIndex < childNodeCount) {\n            childNodesArr.push(tmpEl.childNodes[childNodeIndex]);\n            childNodeIndex += 1;\n          }\n          for (j = 0, len1 = childNodesArr.length; j < len1; j++) {\n            node = childNodesArr[j];\n            fragment.appendChild(node);\n          }\n        } else {\n          for (k = 0, len2 = images.length; k < len2; k++) {\n            image = images[k];\n            img = document.createElement('img');\n            imageObj = image.images[this.options.resolution];\n            if (typeof imageObj !== 'object') {\n              eMsg = \"No image found for resolution: \" + this.options.resolution + \".\";\n              throw new Error(eMsg);\n            }\n            imageUrl = imageObj.url;\n            httpProtocol = window.location.protocol.indexOf(\"http\") >= 0;\n            if (httpProtocol && !this.options.useHttp) {\n              imageUrl = imageUrl.replace(/https?:\\/\\//, '//');\n            }\n            img.src = imageUrl;\n            if (this.options.links === true) {\n              anchor = document.createElement('a');\n              anchor.href = image.link;\n              anchor.appendChild(img);\n              fragment.appendChild(anchor);\n            } else {\n              fragment.appendChild(img);\n            }\n          }\n        }\n        targetEl = this.options.target;\n        if (typeof targetEl === 'string') {\n          targetEl = document.getElementById(targetEl);\n        }\n        if (targetEl == null) {\n          eMsg = \"No element with id=\\\"\" + this.options.target + \"\\\" on page.\";\n          throw new Error(eMsg);\n        }\n        targetEl.appendChild(fragment);\n        header = document.getElementsByTagName('head')[0];\n        header.removeChild(document.getElementById('instafeed-fetcher'));\n        instanceName = \"instafeedCache\" + this.unique;\n        window[instanceName] = void 0;\n        try {\n          delete window[instanceName];\n        } catch (_error) {\n          e = _error;\n        }\n      }\n      if ((this.options.after != null) && typeof this.options.after === 'function') {\n        this.options.after.call(this);\n      }\n      return true;\n    };\n\n    Instafeed.prototype._buildUrl = function() {\n      var base, endpoint, final;\n      base = \"https://api.instagram.com/v1\";\n      switch (this.options.get) {\n        case \"popular\":\n          endpoint = \"media/popular\";\n          break;\n        case \"tagged\":\n          if (!this.options.tagName) {\n            throw new Error(\"No tag name specified. Use the 'tagName' option.\");\n          }\n          endpoint = \"tags/\" + this.options.tagName + \"/media/recent\";\n          break;\n        case \"location\":\n          if (!this.options.locationId) {\n            throw new Error(\"No location specified. Use the 'locationId' option.\");\n          }\n          endpoint = \"locations/\" + this.options.locationId + \"/media/recent\";\n          break;\n        case \"user\":\n          if (!this.options.userId) {\n            throw new Error(\"No user specified. Use the 'userId' option.\");\n          }\n          endpoint = \"users/\" + this.options.userId + \"/media/recent\";\n          break;\n        default:\n          throw new Error(\"Invalid option for get: '\" + this.options.get + \"'.\");\n      }\n      final = base + \"/\" + endpoint;\n      if (this.options.accessToken != null) {\n        final += \"?access_token=\" + this.options.accessToken;\n      } else {\n        final += \"?client_id=\" + this.options.clientId;\n      }\n      if (this.options.limit != null) {\n        final += \"&count=\" + this.options.limit;\n      }\n      final += \"&callback=instafeedCache\" + this.unique + \".parse\";\n      return final;\n    };\n\n    Instafeed.prototype._genKey = function() {\n      var S4;\n      S4 = function() {\n        return (((1 + Math.random()) * 0x10000) | 0).toString(16).substring(1);\n      };\n      return \"\" + (S4()) + (S4()) + (S4()) + (S4());\n    };\n\n    Instafeed.prototype._makeTemplate = function(template, data) {\n      var output, pattern, ref, varName, varValue;\n      pattern = /(?:\\{{2})([\\w\\[\\]\\.]+)(?:\\}{2})/;\n      output = template;\n      while (pattern.test(output)) {\n        varName = output.match(pattern)[1];\n        varValue = (ref = this._getObjectProperty(data, varName)) != null ? ref : '';\n        output = output.replace(pattern, function() {\n          return \"\" + varValue;\n        });\n      }\n      return output;\n    };\n\n    Instafeed.prototype._getObjectProperty = function(object, property) {\n      var piece, pieces;\n      property = property.replace(/\\[(\\w+)\\]/g, '.$1');\n      pieces = property.split('.');\n      while (pieces.length) {\n        piece = pieces.shift();\n        if ((object != null) && piece in object) {\n          object = object[piece];\n        } else {\n          return null;\n        }\n      }\n      return object;\n    };\n\n    Instafeed.prototype._sortBy = function(data, property, reverse) {\n      var sorter;\n      sorter = function(a, b) {\n        var valueA, valueB;\n        valueA = this._getObjectProperty(a, property);\n        valueB = this._getObjectProperty(b, property);\n        if (reverse) {\n          if (valueA > valueB) {\n            return 1;\n          } else {\n            return -1;\n          }\n        }\n        if (valueA < valueB) {\n          return 1;\n        } else {\n          return -1;\n        }\n      };\n      data.sort(sorter.bind(this));\n      return data;\n    };\n\n    Instafeed.prototype._filter = function(images, filter) {\n      var filteredImages, fn, i, image, len;\n      filteredImages = [];\n      fn = function(image) {\n        if (filter(image)) {\n          return filteredImages.push(image);\n        }\n      };\n      for (i = 0, len = images.length; i < len; i++) {\n        image = images[i];\n        fn(image);\n      }\n      return filteredImages;\n    };\n\n    return Instafeed;\n\n  })();\n\n  (function(root, factory) {\n    if (typeof define === 'function' && define.amd) {\n      return define([], factory);\n    } else if (typeof module === 'object' && module.exports) {\n      return module.exports = factory();\n    } else {\n      return root.Instafeed = factory();\n    }\n  })(this, function() {\n    return Instafeed;\n  });\n\n}).call(this);\n"]},"metadata":{},"sourceType":"script"}